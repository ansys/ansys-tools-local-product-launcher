
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta property="og:site_name" content="PyAnsys" />
    <title>Launcher plugin creation &#8212; ansys-tools-local-product-launcher</title>
  
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/ansys-sphinx-theme.css?v=fbf3eb5d" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/ansys-sphinx-theme.css?v=fbf3eb5d" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.23/css/jquery.dataTables.min.css" />
    <link rel="stylesheet" type="text/css" href="https://www.nerdfonts.com/assets/css/webfont.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />


  <!-- Include desired assets -->
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  

  
    <link href="../_static/css/breadcrumbs.css" rel="stylesheet" />
  
    <script src="../_static/documentation_options.js?v=95e61db4"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user_guide/plugin_creation';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://local-product-launcher.tools.docs.pyansys.com/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '0.2';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <link rel="icon" href="../_static/ansys-favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Examples" href="../examples/index.html" />
    <link rel="prev" title="Command-line interface" href="cli.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="0.2.0" />
  <link rel="canonical" href="https://local-product-launcher.tools.docs.pyansys.com/version/stable/user_guide/plugin_creation.html" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="https://docs.pyansys.com/">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/pyansys_logo_transparent_black.png" class="logo__image only-light" alt="ansys-tools-local-product-launcher - Home"/>
    <img src="../_static/pyansys_logo_transparent_white.png" class="logo__image only-dark pst-js-only" alt="ansys-tools-local-product-launcher - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../intro.html">
    Getting started
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    User guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../examples/index.html">
    Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/index.html">
    API reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../contribute.html">
    Contribute
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<div class="search-bar pst-js-only" id="search-bar">
  <form class="bd-search d-flex align-items-center" action="../search.html" method="get">
    <i class="fa-solid fa-magnifying-glass"></i>
    <input type="search" class="form-control" name="q" placeholder="Search the docs ..."
      aria-label="Search the docs ..." autocomplete="off" autocorrect="off"
      autocapitalize="off" spellcheck="false" />
    <span class="search-button__kbd-shortcut">
      <kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd>
    </span>
  </form>
  <div id="static-search-results" class="static-search-results" style="display:none;" tabindex="0"></div>
</div>
        </div>
      
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ansys/ansys-tools-local-product-launcher" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<div class="search-bar pst-js-only" id="search-bar">
  <form class="bd-search d-flex align-items-center" action="../search.html" method="get">
    <i class="fa-solid fa-magnifying-glass"></i>
    <input type="search" class="form-control" name="q" placeholder="Search the docs ..."
      aria-label="Search the docs ..." autocomplete="off" autocorrect="off"
      autocapitalize="off" spellcheck="false" />
    <span class="search-button__kbd-shortcut">
      <kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd>
    </span>
  </form>
  <div id="static-search-results" class="static-search-results" style="display:none;" tabindex="0"></div>
</div>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  
  
    <div id="announcement_msg"></div>
<script>
  fetch("announcement.html")
    .then((response) => {
      if (!response.ok) {
        throw new Error(`HTTP error: ${response.status}`);
      }
      return response.text();
    })
    .then(
      (text) => (document.getElementById("announcement_msg").innerHTML = text),
    )
    .catch((error) => console.error(`Fetch problem: ${error.message}`));
</script>
  


  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../intro.html">
    Getting started
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    User guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../examples/index.html">
    Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/index.html">
    API reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../contribute.html">
    Contribute
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ansys/ansys-tools-local-product-launcher" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="rationale.html">Rationale</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command-line interface</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Launcher plugin creation</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">
<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
         
    <li class="breadcrumb-item breadcrumb-home">
      <a href="https://docs.pyansys.com/" class="nav-link">PyAnsys</a>
    </li>
     
    <li class="breadcrumb-item">
      <a
        href="../index.html"
        class="nav-link"
        aria-label="Home"
      >
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
     
    <li class="breadcrumb-item">
      <a href="index.html" class="nav-link">User guide</a>
    </li>
      
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Launcher plugin creation</span></li>
    
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="launcher-plugin-creation">
<span id="plugin-creation"></span><h1>Launcher plugin creation<a class="headerlink" href="#launcher-plugin-creation" title="Link to this heading">#</a></h1>
<p>This page explains how to create a plugin for the Local Product Launcher. The plugin
in the example launches Ansys Composite PrepPost (ACP) as a subprocess.</p>
<p>The Local Product Launcher defines the interface that a plugin must satisfy in the <a class="reference internal" href="../api/interface.html#module-ansys.tools.local_product_launcher.interface" title="ansys.tools.local_product_launcher.interface"><code class="xref py py-mod docutils literal notranslate"><span class="pre">interface</span></code></a> module.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To simplify the example, the plugin business logic is kept minimal.</p>
</div>
<section id="create-configuration">
<h2>Create configuration<a class="headerlink" href="#create-configuration" title="Link to this heading">#</a></h2>
<p>To start, you must create the user-definable configuration for the launcher. Because
ACP should be run as a subprocess, the path to the server binary must be defined.</p>
<p>This configuration is defined as a <a class="reference external" href="https://docs.python.org/dev/library/dataclasses.html#dataclasses.dataclass" title="(in Python v3.15)"><code class="xref py py-func docutils literal notranslate"><span class="pre">dataclass</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>

<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">DirectLauncherConfig</span><span class="p">:</span>
    <span class="n">binary_path</span><span class="p">:</span> <span class="nb">str</span>
</pre></div>
</div>
<p>The configuration class defines a single <code class="docutils literal notranslate"><span class="pre">binary_path</span></code> option of type <a class="reference external" href="https://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.15)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>.</p>
</section>
<section id="define-launcher">
<h2>Define launcher<a class="headerlink" href="#define-launcher" title="Link to this heading">#</a></h2>
<p>Next, you must define the launcher itself. The full launcher code follows. Because
there’s quite a lot going on in this code, descriptions of each part are provided.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Optional</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">subprocess</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">ansys.tools.local_product_launcher.interface</span><span class="w"> </span><span class="kn">import</span> <span class="n">LauncherProtocol</span><span class="p">,</span> <span class="n">ServerType</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ansys.tools.local_product_launcher.helpers.ports</span><span class="w"> </span><span class="kn">import</span> <span class="n">find_free_ports</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ansys.tools.local_product_launcher.helpers.grpc</span><span class="w"> </span><span class="kn">import</span> <span class="n">check_grpc_health</span>

<span class="k">class</span><span class="w"> </span><span class="nc">DirectLauncher</span><span class="p">(</span><span class="n">LauncherProtocol</span><span class="p">[</span><span class="n">LauncherConfig</span><span class="p">]):</span>
    <span class="n">CONFIG_MODEL</span> <span class="o">=</span> <span class="n">DirectLauncherConfig</span>
    <span class="n">SERVER_SPEC</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;main&quot;</span><span class="p">:</span> <span class="n">ServerType</span><span class="o">.</span><span class="n">GRPC</span><span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">DirectLaunchConfig</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">:</span> <span class="nb">str</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_process</span><span class="p">:</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">port</span> <span class="o">=</span> <span class="n">find_free_ports</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;localhost:</span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_process</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">binary_path</span><span class="p">,</span>
                <span class="sa">f</span><span class="s2">&quot;--server-address=0.0.0.0:</span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="p">],</span>
            <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">DEVNULL</span><span class="p">,</span>
            <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">DEVNULL</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_process</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">TimeoutExpired</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process</span><span class="o">.</span><span class="n">kill</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="o">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">urls</span><span class="p">[</span><span class="n">ServerKey</span><span class="o">.</span><span class="n">MAIN</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">check_grpc_health</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">urls</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;main&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">}</span>
</pre></div>
</div>
<p>The launcher class inherits from <code class="docutils literal notranslate"><span class="pre">LauncherProtocol[LauncherConfig]</span></code>. This isn’t a requirement, but it means a type checker like <a class="reference external" href="https://mypy.readthedocs.io">mypy</a> can verify that the <a class="reference internal" href="../api/interface.html#ansys.tools.local_product_launcher.interface.LauncherProtocol" title="ansys.tools.local_product_launcher.interface.LauncherProtocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">LauncherProtocol</span></code></a> interface is fulfilled.</p>
<p>Next, setting <code class="docutils literal notranslate"><span class="pre">CONFIG_MODEL</span> <span class="pre">=</span> <span class="pre">DirectLauncherConfig</span></code> connects the launcher to the configuration class.</p>
<p>The subsequent line, <code class="docutils literal notranslate"><span class="pre">SERVER_SPEC</span> <span class="pre">=</span> <span class="pre">{&quot;main&quot;:</span> <span class="pre">ServerType.GRPC}</span></code>, defines which kind of servers the
product starts. Here, there’s only a single server, which is accessible via gRPC. The keys in this
dictionary can be chosen arbitrarily, but they should be consistent across the launcher implementation.
Ideally, you use the key to convey some meaning. For example, <code class="docutils literal notranslate"><span class="pre">&quot;main&quot;</span></code> could refer to the main interface
to your product and <code class="docutils literal notranslate"><span class="pre">file_transfer</span></code> could refer to an additional service for file upload and download.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method must accept exactly one keyword-only argument, <code class="docutils literal notranslate"><span class="pre">config</span></code>, which contains the
configuration instance. In this example, the configuration is stored in the <code class="docutils literal notranslate"><span class="pre">_config</span></code> attribute.
For the <code class="docutils literal notranslate"><span class="pre">_url</span></code> and <code class="docutils literal notranslate"><span class="pre">_process</span></code> attributes, only the type is declared for the benefits of the type checker</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">DirectLaunchConfig</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">config</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">:</span> <span class="nb">str</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_process</span><span class="p">:</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</pre></div>
</div>
<p>The core of the launcher implementation is in the <code class="docutils literal notranslate"><span class="pre">start()</span></code> and <code class="docutils literal notranslate"><span class="pre">stop()</span></code> methods:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">port</span> <span class="o">=</span> <span class="n">find_free_ports</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;localhost:</span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_process</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">binary_path</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;--server-address=0.0.0.0:</span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">DEVNULL</span><span class="p">,</span>
        <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">DEVNULL</span><span class="p">,</span>
        <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>This <a class="reference internal" href="../api/interface.html#ansys.tools.local_product_launcher.interface.LauncherProtocol.start" title="ansys.tools.local_product_launcher.interface.LauncherProtocol.start"><code class="xref py py-meth docutils literal notranslate"><span class="pre">start()</span></code></a> method selects an available port using the
<a class="reference internal" href="../api/helpers/ports.html#ansys.tools.local_product_launcher.helpers.ports.find_free_ports" title="ansys.tools.local_product_launcher.helpers.ports.find_free_ports"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_free_ports()</span></code></a> function. It then starts the server as a subprocess. Note that here, the server output is simply discarded. In a real launcher, the option to redirect it (for example to a file) should be added.
The <code class="docutils literal notranslate"><span class="pre">_url</span></code> attribute keeps track of the URL and port that the server should be accessible on.</p>
<p>The <a class="reference internal" href="../api/interface.html#ansys.tools.local_product_launcher.interface.LauncherProtocol.stop" title="ansys.tools.local_product_launcher.interface.LauncherProtocol.stop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">start()</span></code></a> method terminates the subprocess:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_process</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_process</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">TimeoutExpired</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_process</span><span class="o">.</span><span class="n">kill</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_process</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
</pre></div>
</div>
<p>If your product is prone to ignoring <code class="docutils literal notranslate"><span class="pre">SIGTERM</span></code>, you might want to add a timeout to the
<a class="reference external" href="https://docs.python.org/dev/library/subprocess.html#subprocess.Popen.wait" title="(in Python v3.15)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">.wait()</span></code></a> method and retry with the
<a class="reference external" href="https://docs.python.org/dev/library/subprocess.html#subprocess.Popen.kill" title="(in Python v3.15)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">.kill()</span></code></a> method instead of the
<a class="reference external" href="https://docs.python.org/dev/library/subprocess.html#subprocess.Popen.terminate" title="(in Python v3.15)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">.terminate()</span></code></a> method.</p>
<p>Next, you must provide a way to verify that the product has successfully launched. This is implemented
in the <a class="reference internal" href="../api/interface.html#ansys.tools.local_product_launcher.interface.LauncherProtocol.check" title="ansys.tools.local_product_launcher.interface.LauncherProtocol.check"><code class="xref py py-meth docutils literal notranslate"><span class="pre">check</span></code></a>. Because the server implements gRPC health checking, the
<a class="reference internal" href="../api/helpers/grpc.html#ansys.tools.local_product_launcher.helpers.grpc.check_grpc_health" title="ansys.tools.local_product_launcher.helpers.grpc.check_grpc_health"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_grpc_health()</span></code></a> helper can be used for this purpose:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="n">channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="o">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">urls</span><span class="p">[</span><span class="s2">&quot;main&quot;</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">check_grpc_health</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
</pre></div>
</div>
<p>Finally, the <code class="docutils literal notranslate"><span class="pre">_url</span></code> attribute stored in the <a class="reference internal" href="../api/interface.html#ansys.tools.local_product_launcher.interface.LauncherProtocol.start" title="ansys.tools.local_product_launcher.interface.LauncherProtocol.start"><code class="xref py py-meth docutils literal notranslate"><span class="pre">start()</span></code></a> method must
be made available in the <a class="reference internal" href="../api/interface.html#ansys.tools.local_product_launcher.interface.LauncherProtocol.urls" title="ansys.tools.local_product_launcher.interface.LauncherProtocol.urls"><code class="xref py py-attr docutils literal notranslate"><span class="pre">urls</span></code></a> property:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@property</span>
<span class="k">def</span><span class="w"> </span><span class="nf">urls</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;main&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">}</span>
</pre></div>
</div>
<p>Note that the return value for the <code class="docutils literal notranslate"><span class="pre">urls</span></code> property should adhere to the schema defined in <code class="docutils literal notranslate"><span class="pre">SERVER_SPEC</span></code>.</p>
</section>
<section id="register-entrypoint">
<span id="entrypoint"></span><h2>Register entrypoint<a class="headerlink" href="#register-entrypoint" title="Link to this heading">#</a></h2>
<p>Having defined all the necessary components for a Local Product Launcher plugin, you can now register the
plugin, which makes it available. You do this through the Python <a class="reference external" href="https://packaging.python.org/specifications/entry-points/">entrypoints</a>
mechanism.</p>
<p>You define the entrypoint in your package’s build configuration. The exact syntax depends on which
packaging tool you use:</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-0">
setuptools</label><div class="sd-tab-content docutils">
<p>Setuptools can accept its configuration in one of three ways. Choose the one that applies to your project:</p>
<p>In a <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[project.entry-points.</span><span class="s2">&quot;ansys.tools.local_product_launcher.launcher&quot;</span><span class="k">]</span>
<span class="s2">&quot;ACP.direct&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&lt;your.module.name&gt;:DirectLauncher&quot;</span>
</pre></div>
</div>
<p>In a <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> file:</p>
<div class="highlight-cfg notranslate"><div class="highlight"><pre><span></span><span class="k">[options.entry_points]</span>
<span class="na">ansys.tools.local_product_launcher.launcher</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="na">ACP.direct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&lt;your.module.name&gt;:DirectLauncher</span>
</pre></div>
</div>
<p>In a <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">setuptools</span><span class="w"> </span><span class="kn">import</span> <span class="n">setup</span>

<span class="n">setup</span><span class="p">(</span>
    <span class="c1"># ...,</span>
    <span class="n">entry_points</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;ansys.tools.local_product_launcher.launcher&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s1">&#39;ACP.direct = &lt;your.module.name&gt;:DirectLauncher&#39;</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<p>For more information, see the <a class="reference external" href="https://setuptools.pypa.io/en/latest/userguide/entry_point.html#entry-points-for-plugins">setuptools documentation</a>.</p>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-1">
flit</label><div class="sd-tab-content docutils">
<p>In a <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[project.entry-points.</span><span class="s2">&quot;ansys.tools.local_product_launcher.launcher&quot;</span><span class="k">]</span>
<span class="s2">&quot;ACP.direct&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&lt;your.module.name&gt;:DirectLauncher&quot;</span>
</pre></div>
</div>
<p>For more information, see the <a class="reference external" href="https://flit.pypa.io/en/stable/pyproject_toml.html#pyproject-project-entrypoints">flit documentation</a>.</p>
</div>
<input id="sd-tab-item-2" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-2">
poetry</label><div class="sd-tab-content docutils">
<p>In a <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.poetry.plugins.</span><span class="s2">&quot;ansys.tools.local_product_launcher.launcher&quot;</span><span class="k">]</span>
<span class="s2">&quot;ACP.direct&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&lt;your.module.name&gt;:DirectLauncher&quot;</span>
</pre></div>
</div>
<p>For more information, see the <a class="reference external" href="https://python-poetry.org/docs/pyproject#plugins">poetry documentation</a>.</p>
</div>
</div>
<p>In all cases, <code class="docutils literal notranslate"><span class="pre">ansys.tools.local_product_launcher.launcher</span></code> is an identifier specifying that the entrypoint defines a Local Product Launcher plugin. It must be kept the same.</p>
<p>The entrypoint itself has two parts:</p>
<ul>
<li><p>The entrypoint name <code class="docutils literal notranslate"><span class="pre">ACP.direct</span></code> consists of two parts: <code class="docutils literal notranslate"><span class="pre">ACP</span></code> is the product name, and
<code class="docutils literal notranslate"><span class="pre">direct</span></code> is the launch mode identifier. The name must be of this format and contain exactly
one dot <code class="docutils literal notranslate"><span class="pre">.</span></code> separating the two parts.</p></li>
<li><p>The entrypoint value <code class="docutils literal notranslate"><span class="pre">&lt;your.module.name&gt;:DirectLauncher</span></code> defines where the launcher
implementation is located. In other words, it must load the launcher class:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="o">&lt;</span><span class="n">your</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">name</span><span class="o">&gt;</span> <span class="kn">import</span><span class="w"> </span><span class="nn">DirectLauncher</span>
</pre></div>
</div>
</li>
</ul>
<p>For the entrypoints to update, you must re-install your package (even if it was installed with <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span></code>).</p>
</section>
<section id="add-command-line-default-and-description">
<h2>Add command-line default and description<a class="headerlink" href="#add-command-line-default-and-description" title="Link to this heading">#</a></h2>
<p>With the three preceding parts, you’ve successfully created a Local Product Launcher plugin. <svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-rocket" viewBox="0 0 16 16" aria-hidden="true"><path d="M14.064 0h.186C15.216 0 16 .784 16 1.75v.186a8.752 8.752 0 0 1-2.564 6.186l-.458.459c-.314.314-.641.616-.979.904v3.207c0 .608-.315 1.172-.833 1.49l-2.774 1.707a.749.749 0 0 1-1.11-.418l-.954-3.102a1.214 1.214 0 0 1-.145-.125L3.754 9.816a1.218 1.218 0 0 1-.124-.145L.528 8.717a.749.749 0 0 1-.418-1.11l1.71-2.774A1.748 1.748 0 0 1 3.31 4h3.204c.288-.338.59-.665.904-.979l.459-.458A8.749 8.749 0 0 1 14.064 0ZM8.938 3.623h-.002l-.458.458c-.76.76-1.437 1.598-2.02 2.5l-1.5 2.317 2.143 2.143 2.317-1.5c.902-.583 1.74-1.26 2.499-2.02l.459-.458a7.25 7.25 0 0 0 2.123-5.127V1.75a.25.25 0 0 0-.25-.25h-.186a7.249 7.249 0 0 0-5.125 2.123ZM3.56 14.56c-.732.732-2.334 1.045-3.005 1.148a.234.234 0 0 1-.201-.064.234.234 0 0 1-.064-.201c.103-.671.416-2.273 1.15-3.003a1.502 1.502 0 1 1 2.12 2.12Zm6.94-3.935c-.088.06-.177.118-.266.175l-2.35 1.521.548 1.783 1.949-1.2a.25.25 0 0 0 .119-.213ZM3.678 8.116 5.2 5.766c.058-.09.117-.178.176-.266H3.309a.25.25 0 0 0-.213.119l-1.2 1.95ZM12 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg></p>
<p>You can now improve the usability of the command line by adding a default and description to the configuration class.</p>
<p>To do so, edit the <code class="docutils literal notranslate"><span class="pre">DirectLaunchConfig</span></code> class, using the <a class="reference external" href="https://docs.python.org/dev/library/dataclasses.html#dataclasses.field" title="(in Python v3.15)"><code class="xref py py-func docutils literal notranslate"><span class="pre">dataclasses.field()</span></code></a> function to enrich
the <code class="docutils literal notranslate"><span class="pre">binary_path</span></code>:</p>
<ul class="simple">
<li><p>The default value is specified as the <code class="docutils literal notranslate"><span class="pre">default</span></code> argument.</p></li>
<li><p>The description is given in the <code class="docutils literal notranslate"><span class="pre">metadata</span></code> dictionary, using the special key <a class="reference internal" href="../api/interface.html#ansys.tools.local_product_launcher.interface.METADATA_KEY_DOC" title="ansys.tools.local_product_launcher.interface.METADATA_KEY_DOC"><code class="xref py py-obj docutils literal notranslate"><span class="pre">METADATA_KEY_DOC</span></code></a>.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">dataclasses</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Union</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">ansys.tools.path</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_available_ansys_installations</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ansys.tools.local_product_launcher.interface</span><span class="w"> </span><span class="kn">import</span> <span class="n">METADATA_KEY_DOC</span>


<span class="k">def</span><span class="w"> </span><span class="nf">get_default_binary_path</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">installations</span> <span class="o">=</span> <span class="n">get_available_ansys_installations</span><span class="p">()</span>
        <span class="n">ans_root</span> <span class="o">=</span> <span class="n">installations</span><span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="n">installations</span><span class="p">)]</span>
        <span class="n">binary_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ans_root</span><span class="p">,</span> <span class="s2">&quot;ACP&quot;</span><span class="p">,</span> <span class="s2">&quot;acp_grpcserver&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;nt&quot;</span><span class="p">:</span>
            <span class="n">binary_path</span> <span class="o">+=</span> <span class="s2">&quot;.exe&quot;</span>
        <span class="k">return</span> <span class="n">binary_path</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">RuntimeError</span><span class="p">,</span> <span class="ne">FileNotFoundError</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>


<span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">DirectLaunchConfig</span><span class="p">:</span>

    <span class="n">binary_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">dataclasses</span><span class="o">.</span><span class="n">field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="n">get_default_binary_path</span><span class="p">(),</span>
        <span class="n">metadata</span><span class="o">=</span><span class="p">{</span>
            <span class="n">METADATA_KEY_DOC</span><span class="p">:</span> <span class="s2">&quot;Path to the ACP gRPC server executable.&quot;</span>
        <span class="p">},</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>For the default value, use the <code class="docutils literal notranslate"><span class="pre">get_available_ansys_installations</span></code> helper to find the Ansys
installation directory.</p>
<p>Now, when running <code class="docutils literal notranslate"><span class="pre">ansys-launcher</span> <span class="pre">configure</span> <span class="pre">ACP</span> <span class="pre">direct</span></code>, users can see and accept the default
value if they want.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the default value is <code class="docutils literal notranslate"><span class="pre">None</span></code>, it is converted to the string <code class="docutils literal notranslate"><span class="pre">default</span></code> for the
command-line interface. This allows implementing more complicated default behaviors
that may not be expressible when the command-line interface is run.</p>
</div>
</section>
<section id="add-a-fallback-launch-mode">
<h2>Add a fallback launch mode<a class="headerlink" href="#add-a-fallback-launch-mode" title="Link to this heading">#</a></h2>
<p>If you want to provide a fallback launch mode that can be used without any configuration, you can add
an entrypoint with the special name <code class="docutils literal notranslate"><span class="pre">&lt;product&gt;.__fallback__</span></code>.</p>
<p>For example, if you wanted the <code class="docutils literal notranslate"><span class="pre">DirectLauncher</span></code> to be the fallback for ACP, you could add this
entrypoint:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[project.entry-points.</span><span class="s2">&quot;ansys.tools.local_product_launcher.launcher&quot;</span><span class="k">]</span>
<span class="s2">&quot;ACP.__fallback__&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&lt;your.module.name&gt;:DirectLauncher&quot;</span>
</pre></div>
</div>
<p>The fallback launch mode is used with its default configuration. This means that the configuration class must have default values for all its fields.</p>
</section>
<section id="hide-advanced-options">
<h2>Hide advanced options<a class="headerlink" href="#hide-advanced-options" title="Link to this heading">#</a></h2>
<p>If your launcher plugin has advanced options, you can skip prompting the user for them by default.
This is done by setting the special key <a class="reference internal" href="../api/interface.html#ansys.tools.local_product_launcher.interface.METADATA_KEY_NOPROMPT" title="ansys.tools.local_product_launcher.interface.METADATA_KEY_NOPROMPT"><code class="xref py py-obj docutils literal notranslate"><span class="pre">METADATA_KEY_NOPROMPT</span></code></a>
to <code class="docutils literal notranslate"><span class="pre">True</span></code> in the <code class="docutils literal notranslate"><span class="pre">metadata</span></code> dictionary:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">dataclasses</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">ansys.tools.local_product_launcher.interface</span><span class="w"> </span><span class="kn">import</span> <span class="n">METADATA_KEY_NOPROMPT</span>


<span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">DirectLaunchConfig</span><span class="p">:</span>
    <span class="o">&lt;...&gt;</span>
    <span class="n">environment_variables</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">metadata</span><span class="o">=</span><span class="p">{</span>
            <span class="n">METADATA_KEY_DOC</span><span class="p">:</span> <span class="s2">&quot;Extra environment variables to define when launching the server.&quot;</span><span class="p">,</span>
            <span class="n">METADATA_KEY_NOPROMPT</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">}</span>
    <span class="p">)</span>
</pre></div>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="cli.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Command-line interface</p>
      </div>
    </a>
    <a class="right-next"
       href="../examples/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Examples</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-configuration">Create configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#define-launcher">Define launcher</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#register-entrypoint">Register entrypoint</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#add-command-line-default-and-description">Add command-line default and description</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#add-a-fallback-launch-mode">Add a fallback launch mode</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hide-advanced-options">Hide advanced options</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
<!-- If there is no fix edit button function, use the PyData edit-this-button-->
</div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <ul class="this-page-menu">
      <li><a href="../_sources/user_guide/plugin_creation.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>


  <!-- Include desired assets -->
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.7/require.min.js"></script>

<script>
// Passing the search options to the search.js file
const SEARCH_OPTIONS = JSON.parse('{"keys": ["title", "text"], "limit": 10, "threshold": 0.2}');
const SEARCH_FILE = "../_static/search.json";
</script>


<script src="../_static/js/search.js"></script>
  
  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright (c) 2025 ANSYS, Inc. All rights reserved.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the
  <a href="https://sphinxdocs.ansys.com/version/stable/index.html"
    >Ansys Sphinx Theme</a
  >
  1.4.4. <br />Last updated on
  <span id="ast_build_date"></span>
</p>
<script>
  var options = { day: "numeric", month: "long", year: "numeric" };
  var ast_lastModifiedDate = new Date(document.lastModified);
  var ast_build_date = ast_lastModifiedDate.toLocaleDateString("en-US", options);
  document.getElementById("ast_build_date").innerHTML = ast_build_date;
</script></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>